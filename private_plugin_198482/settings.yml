---
strategy: polling
no_screen_padding: 'no'
dark_mode: 'no'
static_data: ''
polling_verb: post
polling_url: https://trmnl.bettens.dev/email/messages
polling_headers: content-type=application/json
polling_body: "{\r\n  {% if provider == \"gmail\" %}\r\n  \"server\": \"imap.gmail.com\",\r\n  \"port\": 993,\r\n  \"password\": {{ gmail_password | json }}\r\n  {% elsif provider == \"outlook\" %}\r\n  \"server\": \"outlook.office365.com\",\r\n  \"port\": 993,\r\n  \"password\": {{ outlook_password | json }}\r\n  {% elsif provider == \"yahoo\" %}\r\n  \"server\": \"imap.mail.yahoo.com\",\r\n  \"port\": 993,\r\n  \"password\": {{ yahoo_password | json }}\r\n  {% elsif provider == \"icloud\" %}\r\n  \"server\": \"imap.mail.me.com\",\r\n  \"port\": 993,\r\n  \"password\": {{ icloud_password | json }}\r\n  {% elsif provider == \"custom\" %}\r\n  \"server\": {{ custom_server | json }},\r\n  \"port\": {{ custom_port | default: 993 | plus: 0 }},\r\n  \"password\": {{ custom_password | json }}\r\n  {% endif %},\r\n\r\n  \"username\": {{ email | json }},\r\n  \"folder\": {{ folder | default: \"INBOX\" | json }},\r\n  \"limit\": {{ limit | default: 10 | plus: 0 }},\r\n  \"unread_only\": {% if unread_only == \"yes\" %}true{% else %}false{% endif %},\r\n  \"flagged_only\": {% if flagged_only == \"yes\" %}true{% else %}false{% endif %}\r\n\r\n  {% if provider == \"gmail\" and gmail_category and gmail_category != \"\" %},\r\n  \"gmail_category\": {{ gmail_category | json }}\r\n  {% endif %}\r\n\r\n  {% if from_emails and from_emails != \"\" %},\r\n  \"from_emails\": {{ from_emails | json }}\r\n  {% endif %}\r\n}"
id: 198482
custom_fields:
- keyname: author_bio
  field_type: author_bio
  name: About This Plugin
  description: "<strong>Display your recent emails on your TRMNL display.</strong><br /><br />This plugin connects to your email account via IMAP and shows your latest messages with customizable filters and display options.<br /><br /><strong>Backend Required:</strong> Fetches emails in real-time using your self-hosted backend service."
  category: email
  github_url: https://github.com/ExcuseMi/trmnl-email-messages-plugin
- keyname: provider
  field_type: select
  name: Email Provider
  description: Select your email provider. The plugin will automatically configure IMAP settings for popular providers.<br /><br /><strong>Popular providers:</strong> Gmail, Outlook, Yahoo, iCloud<br /><strong>Custom:</strong> For other email services with IMAP support
  default: gmail
  options:
  - Gmail: gmail
  - Outlook: outlook
  - Yahoo: yahoo
  - iCloud: icloud
  - Custom IMAP Server: custom
  conditional_validation:
  - when: gmail
    hidden:
    - outlook_password
    - yahoo_password
    - icloud_password
    - custom_password
    - custom_server
    - custom_port
  - when: outlook
    hidden:
    - gmail_password
    - gmail_category
    - yahoo_password
    - icloud_password
    - custom_password
    - custom_server
    - custom_port
  - when: yahoo
    hidden:
    - gmail_password
    - gmail_category
    - outlook_password
    - icloud_password
    - custom_password
    - custom_server
    - custom_port
  - when: icloud
    hidden:
    - gmail_password
    - gmail_category
    - outlook_password
    - yahoo_password
    - custom_password
    - custom_server
    - custom_port
  - when: custom
    hidden:
    - gmail_password
    - gmail_category
    - outlook_password
    - yahoo_password
    - icloud_password
- keyname: email
  field_type: string
  name: Email Address
  description: Your full email address used to connect via IMAP.<br /><br /><strong>Example:</strong> yourname@gmail.com
  placeholder: yourname@example.com
- keyname: gmail_password
  field_type: password
  name: Gmail App Password
  description: <strong>Never use your regular Gmail password!</strong><br /><br />1. Enable 2-Factor Authentication on your Google account<br />2. Generate a 16-character app password at <a href="https://myaccount.google.com/apppasswords" target="_blank">Google App Passwords</a><br />3. Enter the generated password below
- keyname: outlook_password
  field_type: password
  name: Outlook App Password
  description: "<strong>Setup Steps:</strong><br />1. <a href='https://support.microsoft.com/en-us/office/pop-imap-and-smtp-settings-for-outlook-com-d088b986-291d-42b8-9564-9c414e2aa040' target='_blank'>Enable IMAP</a> in Outlook settings<br />2. <a href='https://account.live.com/proofs/AppPassword' target='_blank'>Create an app password</a><br />3. Wait 20-30 minutes for activation<br />4. Approve connection in <a href='https://account.live.com/activity' target='_blank'>account activity</a><br /><br /><strong>Note:</strong> New Outlook accounts may have limited IMAP support"
- keyname: yahoo_password
  field_type: password
  name: Yahoo App Password
  description: "<strong>App password required for IMAP access.</strong><br /><br />Generate in your Yahoo Account Security settings.<br /><br /><em>Do not use your regular Yahoo password!</em>"
- keyname: icloud_password
  field_type: password
  name: iCloud App-Specific Password
  description: <strong>2-Factor Authentication required.</strong><br /><br />1. Go to <a href="https://appleid.apple.com" target="_blank">Apple ID Security</a><br />2. Generate an app-specific password<br />3. Enter the generated password below<br /><br /><em>You must have 2FA enabled on your Apple ID.</em>
- keyname: custom_password
  field_type: password
  name: IMAP Password
  description: Your email account password or app-specific password.<br /><br />Check with your email provider for IMAP authentication requirements.
- keyname: custom_server
  field_type: string
  name: IMAP Server Address
  description: The IMAP server hostname for your email provider.<br /><br /><strong>Example:</strong> imap.example.com<br /><br />Contact your email provider if you're unsure of the server address.
  placeholder: imap.example.com
- keyname: custom_port
  field_type: number
  name: IMAP Port
  description: "<strong>Recommended: 993</strong> (SSL/TLS encrypted)<br /><br />Use 143 only if your provider requires non-SSL IMAP.<br /><br /><em>Always prefer encrypted connections for security.</em>"
  default: 993
  min: 1
  max: 65535
- keyname: folder
  field_type: string
  name: Mailbox Folder
  description: 'The email folder to display.<br /><br /><strong>Common folders:</strong><br />• INBOX - Main inbox<br />• Sent - Sent messages<br />• Drafts - Draft messages<br />• [Custom] - Any folder name<br /><br /><em>Note: Folder names are case-sensitive</em>'
  default: INBOX
  placeholder: INBOX
- keyname: gmail_category
  field_type: select
  name: Gmail Category Filter
  description: Filter emails by Gmail tab. Gmail automatically sorts emails into categories:<br /><br /><strong>Primary:</strong> Personal emails from people<br /><strong>Social:</strong> Social network notifications<br /><strong>Promotions:</strong> Deals, offers, marketing<br /><strong>Updates:</strong> Confirmations, receipts, statements<br /><strong>Forums:</strong> Mailing lists, newsletters<br /><br />Select 'All' to show emails from every category.
  default: ''
  options:
  - All Categories: ''
  - Primary (Personal): Primary
  - Social (Social Networks): Social
  - Promotions (Deals & Ads): Promotions
  - Updates (Confirmations): Updates
  - Forums (Mailing Lists): Forums
- keyname: limit
  field_type: number
  name: Number of Messages
  description: How many emails to display on your TRMNL screen.
  default: 10
  min: 1
  max: 30
- keyname: unread_only
  field_type: select
  name: Show Unread Only
  description: 'Only display emails you haven''t read yet.<br /><br /><strong>Use case:</strong> See what needs your attention<br /><br /><em>Tip: Combine with other filters for more specific results</em>'
  default: 'no'
  optional: true
  options:
  - Yes - Unread only: 'yes'
  - No - Show all: 'no'
- keyname: flagged_only
  field_type: select
  name: Show Flagged Only
  description: Only display emails you've marked as important ⭐.<br /><em>Great for tracking emails that need follow-up</em>
  default: 'no'
  optional: true
  options:
  - Yes - Important only: 'yes'
  - No - Show all: 'no'
- keyname: from_emails
  field_type: multi_string
  name: Filter by Sender
  description: Only show emails from specific senders.<br /><br /><strong>Examples:</strong><br />• <code>boss@company.com</code> - Specific person<br />• <code>@company.com</code> - Everyone at company.com<br />• <code>support</code> - Matches support@anywhere.com<br /><br /><em>Leave empty to show emails from all senders</em>
  placeholder: email@domain.com
  optional: true
- keyname: read_subject_regular
  field_type: select
  name: Display Read Emails as Regular Text
  description: "<strong>Visual distinction between read and unread:</strong><br /><br />• <strong>Read emails:</strong> Regular text<br />• <strong>Unread emails:</strong> Bold text<br /><br /><em>Makes it easier to spot what's new at a glance</em>"
  default: 'yes'
  optional: true
  options:
  - Yes - Regular text: 'yes'
  - No - Keep bold: 'no'
- keyname: show_sender_email
  field_type: select
  name: Show Email Address Instead of Name
  description: Choose what to display for each sender:<br /><br /><strong>Name:</strong> John Doe<br /><strong>Email:</strong> john@company.com<br /><br /><em>Use email addresses when names aren't helpful or you need to see the exact address</em>
  default: 'no'
  optional: true
  options:
  - Yes - Show address: 'yes'
  - No - Show name: 'no'
- keyname: group_by_date
  field_type: select
  name: Group Emails by Date
  description: Organize emails under date headers for easier chronological scanning.<br /><br /><strong>Grouped view:</strong><br />• Today<br />&nbsp;&nbsp;10:30 AM · sender@example.com<br />• Yesterday<br />&nbsp;&nbsp;2:15 PM · other@example.com<br /><br /><strong>Ungrouped view:</strong><br />• 10:30 AM · sender@example.com<br />• Dec 17 · other@example.com<br /><br /><em>When grouped, all emails show time only (date is in the header)</em>
  default: 'yes'
  optional: true
  options:
  - No - Dates inline: 'no'
  - Yes - Group with headers: 'yes'
- keyname: time_format
  field_type: select
  name: Time Format
  description: How to display message times:<br /><br /><strong>12-hour:</strong> 2:30 PM, 9:15 AM<br /><strong>24-hour:</strong> 14:30, 09:15<br /><br /><em>Choose based on your preference and regional conventions</em>
  default: 24h
  optional: true
  options:
  - 24-hour (14:30): 24h
  - 12-hour with AM/PM (2:30 PM): 12h
- keyname: date_format
  field_type: select
  name: Date Format
  description: How to display dates for older emails and group headers:<br /><br /><strong>Short:</strong> Dec 18 <em>(saves space)</em><br /><strong>Medium:</strong> Dec 18, 2024<br /><strong>Long:</strong> December 18, 2024<br /><strong>Numeric:</strong> 12/18/24<br /><strong>ISO:</strong> 2024-12-18 <em>(sortable)</em><br /><br />Choose based on your display size and preference.
  default: short
  optional: true
  options:
  - Short (Dec 18): short
  - Medium (Dec 18, 2024): medium
  - Long (December 18, 2024): long
  - Numeric (12/18/24): numeric
  - ISO Date (2024-12-18): iso
name: Email Messages
refresh_interval: 60
